<!DOCTYPE html>
<html>
	<head>
		<title>Creative Fuse</title>
		<link rel = "stylesheet" href = "../css/common.css" />
		<link rel = "stylesheet" href = "../css/radmenu.css" />
		
		<script type="text/javascript" src="../scripts/jquery-1.11.3.min.js"></script>
		<script type='text/javascript' src="../scripts/jQuery.radmenu.min.js"></script>
	
		<script type="text/javascript">
			jQuery(document).ready(function(){
				jQuery("#radial_container,#radial_container2,#radial_container3,#radial_container4").radmenu({
					listClass: 'list', // the list class to look within for items
					itemClass: 'item', // the items - NOTE: the HTML inside the item is copied into the menu item
					radius: 250, // radius in pixels
					animSpeed:400, // animation speed in millis
					centerX: 0, // the center x axis offset
					centerY: 0, // the center y axis offset
					selectEvent: "click", // the select event (click)
					onSelect: function($selected){ // show what is returned 
						var selCode = $selected.html().split('value="');
						selCode = selCode[1].split('"');
						var intVal = parseInt(selCode[0]);
						
						if ($(".fuse_list li").length) {
							$(".fuse_list").append("<li><h3 class='plus'>+</h3></li><li><img src='../graphics/Ingredients/"+intVal+".png'><input class='ingredient' value='"+intVal+"'></li>");
							}
						else {
							$(".fuse_list").append("<li><img src='../graphics/Ingredients/"+intVal+".png'><input class='ingredient' value='"+intVal+"'></li>");
						}
						$(".fuse_list img").css("visibility","visible");
					},
					angleOffset: 0 // in degrees
				});
			
				addEventListener('load',function(){
						jQuery("#radial_container,#radial_container2,#radial_container3,#radial_container4").radmenu("show");
					},
				false);
			
				$(".fuse_list").on('click', 'li', function() {
					if ($(this).is(':first-child')){
						$(this).next().remove();
						$(this).remove();
					}
					else {
						$(this).prev().remove();
						$(this).remove();
					}
				});
			});
			
			var currentLayer = 'page1';
			function showLayer(lyr){
				hideLayer(currentLayer);
				document.getElementById(lyr).style.visibility = 'visible';
				currentLayer = lyr;
			}

			function hideLayer(lyr){
				document.getElementById(lyr).style.visibility = 'hidden';
			}
			
			function matches(arr1, arr2){
				if (arr1.length !== arr2.length) return false;
				for (var i = 0, len = arr1.length; i < len; i++){
					if (arr1[i] !== arr2[i]){
						return false;
					}
				}
				return true; 
			}
			
			function showValues(form){
				var fuse = $(".fuse_list").html();
				var comboVal = [];
				$(".fuse_list .ingredient").each(function(i, elem){
					comboVal[i] = parseInt($(elem).val());
					});	
				var thisCombo = comboVal.slice().sort(function(a, b){return a-b});
				var drinkCombos = [[1,9],[4,8,15],[3,15,39],[2,14,39],[0,8,13,15],[0,1,3,4,8,12],[3,18,27],[3,11,15,36,39],[0,14,17,24,28,38,39],[5,11,20,39]];
				var drinklist = ["Martini", "Margarita", "Daiquiri", "Sour Whiskey", "Cosmopolitan", "Long Island Ice Tea", "Pina Colada", "Mojito", "Bloody Mary", "Old Fashioned"];
				var combo = "new";
				var drink = "New";
				for (i = 0; i < drinkCombos.length; ++i){
					if (matches(thisCombo, drinkCombos[i])) {
						combo = "win";
						drink = drinklist[i];
						break;
					}
				};
				window.location = combo+'Combo.html?drink='+drink+'&combo='+comboVal;
			}
		</script>
	</head>
	
	<body>
		<header>
			<h1 class="title">Create your Fuse</h2>
			<div id="cancel" onClick="window.location.href='../index.html'">
				<img src="../graphics/Icons/cancel.png">
			</div>
		</header>
		
		<form id="multiForm" method="POST" action="javascript:void(0)" onSubmit="showValues(this)">
			<div id="page1" class="page" style="visibility:visible;">
				<div id='radial_container'>
					<ul class='list'>
						<li class='item'><div id="i0"><img src="../graphics/Ingredients/0.png"><input class='ingredient' value='0'></div></li>
						<li class='item'><div id="i1"><img src="../graphics/Ingredients/1.png"><input class='ingredient' value='1'></div></li>
						<li class='item'><div id="i2"><img src="../graphics/Ingredients/2.png"><input class='ingredient' value='2'></div></li>
						<li class='item'><div id="i3"><img src="../graphics/Ingredients/3.png"><input class='ingredient' value='3'></div></li>
						<li class='item'><div id="i4"><img src="../graphics/Ingredients/4.png"><input class='ingredient' value='4'></div></li>
						<li class='item'><div id="i5"><img src="../graphics/Ingredients/5.png"><input class='ingredient' value='5'></div></li>
						<li class='item'><div id="i6"><img src="../graphics/Ingredients/6.png"><input class='ingredient' value='6'></div></li>
						<li class='item'><div id="i7"><img src="../graphics/Ingredients/7.png"><input class='ingredient' value='7'></div></li>
						<li class='item'><div id="i8"><img src="../graphics/Ingredients/8.png"><input class='ingredient' value='8'></div></li>
						<li class='item'><div id="i9"><img src="../graphics/Ingredients/9.png"><input class='ingredient' value='9'></div></li>
					</ul>
				</div >
				<div id="circleWrap">
					<div class="circle">Please choose your spirit/s</div>
				</div>
				<div id="buttWrap">
					<input type="button" id="C1" class="button" value="NEXT >" onClick="showLayer('page2')">
				</div>
			</div>
			<div id="page2" class="page">
				<div id='radial_container2'>
					<ul class='list'>
						<li class='item'><div id="i10"><img src="../graphics/Ingredients/10.png"><input class='ingredient' value='10'></div></li>
						<li class='item'><div id="i11"><img src="../graphics/Ingredients/11.png"><input class='ingredient' value='11'></div></li>
						<li class='item'><div id="i12"><img src="../graphics/Ingredients/12.png"><input class='ingredient' value='12'></div></li>
						<li class='item'><div id="i13"><img src="../graphics/Ingredients/13.png"><input class='ingredient' value='13'></div></li>
						<li class='item'><div id="i14"><img src="../graphics/Ingredients/14.png"><input class='ingredient' value='14'></div></li>
						<li class='item'><div id="i15"><img src="../graphics/Ingredients/15.png"><input class='ingredient' value='15'></div></li>
						<li class='item'><div id="i16"><img src="../graphics/Ingredients/16.png"><input class='ingredient' value='16'></div></li>
						<li class='item'><div id="i17"><img src="../graphics/Ingredients/17.png"><input class='ingredient' value='17'></div></li>
						<li class='item'><div id="i18"><img src="../graphics/Ingredients/18.png"><input class='ingredient' value='18'></div></li>
						<li class='item'><div id="i19"><img src="../graphics/Ingredients/19.png"><input class='ingredient' value='19'></div></li>
					</ul>
				</div >
				<div id="circleWrap">
					<div class="circle">Please choose your mixer/s</div>
				</div>
				<div id="buttWrap">
					<input type="button" id="B1" class="button" value="< BACK" onClick="showLayer('page1')"><input type="button" id="C2" class="button" value="NEXT >" onClick="showLayer('page3')">
				</div>
			</div>
			<div id="page3" class="page">
				<div id='radial_container3'>
					<ul class='list'>
						<li class='item'><div id="i20"><img src="../graphics/Ingredients/20.png"><input class='ingredient' value='20'></div></li>
						<li class='item'><div id="i21"><img src="../graphics/Ingredients/21.png"><input class='ingredient' value='21'></div></li>
						<li class='item'><div id="i22"><img src="../graphics/Ingredients/22.png"><input class='ingredient' value='22'></div></li>
						<li class='item'><div id="i23"><img src="../graphics/Ingredients/23.png"><input class='ingredient' value='23'></div></li>
						<li class='item'><div id="i24"><img src="../graphics/Ingredients/24.png"><input class='ingredient' value='24'></div></li>
						<li class='item'><div id="i25"><img src="../graphics/Ingredients/25.png"><input class='ingredient' value='25'></div></li>
						<li class='item'><div id="i26"><img src="../graphics/Ingredients/26.png"><input class='ingredient' value='26'></div></li>
						<li class='item'><div id="i27"><img src="../graphics/Ingredients/27.png"><input class='ingredient' value='27'></div></li>
						<li class='item'><div id="i28"><img src="../graphics/Ingredients/28.png"><input class='ingredient' value='28'></div></li>
						<li class='item'><div id="i29"><img src="../graphics/Ingredients/29.png"><input class='ingredient' value='29'></div></li>
					</ul>
				</div >
				<div id="circleWrap">
					<div class="circle">Please choose your mixer/s</div>
				</div>
				<div id="buttWrap">
					<input type="button" id="B2" class="button" value="< BACK" onClick="showLayer('page2')"><input type="button" id="C3" class="button" value="NEXT >" onClick="showLayer('page4')">
				</div>
			</div>
			<div id="page4" class="page">
				<div id='radial_container4'>
					<ul class='list'>
						<li class='item'><div id="i30"><img src="../graphics/Ingredients/30.png"><input class='ingredient' value='30'></div></li>
						<li class='item'><div id="i31"><img src="../graphics/Ingredients/31.png"><input class='ingredient' value='31'></div></li>
						<li class='item'><div id="i32"><img src="../graphics/Ingredients/32.png"><input class='ingredient' value='32'></div></li>
						<li class='item'><div id="i33"><img src="../graphics/Ingredients/33.png"><input class='ingredient' value='33'></div></li>
						<li class='item'><div id="i34"><img src="../graphics/Ingredients/34.png"><input class='ingredient' value='34'></div></li>
						<li class='item'><div id="i35"><img src="../graphics/Ingredients/35.png"><input class='ingredient' value='35'></div></li>
						<li class='item'><div id="i36"><img src="../graphics/Ingredients/36.png"><input class='ingredient' value='36'></div></li>
						<li class='item'><div id="i37"><img src="../graphics/Ingredients/37.png"><input class='ingredient' value='37'></div></li>
						<li class='item'><div id="i38"><img src="../graphics/Ingredients/38.png"><input class='ingredient' value='38'></div></li>
						<li class='item'><div id="i39"><img src="../graphics/Ingredients/39.png"><input class='ingredient' value='39'></div></li>
					</ul>
				</div >
				<div id="circleWrap">
					<div class="circle">Please choose your garnish/extras</div>
				</div>
				<div id="buttWrap">
					<input type="button" id="B3" class="button" value="< BACK" onClick="showLayer('page3')"><input type="submit" value="SUBMIT" id="submit" class="button">
				</div>
			</div>
		</form>
		
		<section id="your_fuse">
			<h3 class="fuse_text">YOUR FUSE:</h3>
			<ul class="fuse_list">

			</ul>
		</section>
		
	</body>
</html>